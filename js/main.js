!function(g){var I={};function c(n){if(I[n])return I[n].exports;var r=I[n]={i:n,l:!1,exports:{}};return g[n].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=g,c.c=I,c.d=function(g,I,n){c.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:n})},c.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},c.t=function(g,I){if(1&I&&(g=c(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var r in g)c.d(n,r,function(I){return g[I]}.bind(null,r));return n},c.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return c.d(I,"a",I),I},c.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},c.p="",c(c.s=0)}([function(module,exports,__webpack_require__){"use strict";eval('\r\n\r\nif ("serviceWorker" in navigator) {\r\n  window.addEventListener("load", function () {\r\n    navigator.serviceWorker.register("serviceworker.js").then(\r\n      function (registration) {\r\n        console.log(\r\n          "ServiceWorker registration successful with scope: ",\r\n          registration.scope\r\n        );\r\n      },\r\n      function (err) {\r\n        console.log("ServiceWorker registration failed: ", err);\r\n      }\r\n    );\r\n  });\r\n}\r\nconsole.log(`it works`);\r\n\r\nconst ASTEROID_NUMBER = 2;\r\nconst ASTEROID_SIZE = 50;\r\nconst ASTEROID_SPEED = 40;\r\nconst ASTEROID_VERT = 10;\r\nconst ASTEROID_JAGGENDESS = 0.5;\r\nconst BLINK = 0.1;\r\nconst FPS = 30;\r\nconst GAME_LIVE = 3;\r\nconst INVISIBILITY = 3;\r\nconst LASER_MAX = 120;\r\nconst LASER_SPEED = 500;\r\nconst POINTS_FOR_LARGE_ASTEROID = 10;\r\nconst POINTS_FOR_SMALL_ASTEROID = 20;\r\nconst SHIP_SIZE = 30;\r\nconst SHIP_FORWARD = 5;\r\nconst SHIP_EXPLODEDURATION = 1;\r\nconst TURN_SPEED = 270;\r\nconst TEXT_FADE_TIME = 3;\r\n\r\nlet asteroids = [];\r\nlet canvas = document.getElementById("gameCanvas");\r\nlet ctx = canvas.getContext("2d");\r\nlet hue = 0;\r\nlet level;\r\nlet lives = 3;\r\nlet livesColour;\r\nlet pause = false;\r\nlet ship;\r\nlet text;\r\nlet textAlpha;\r\nlet score;\r\n\r\nlet shoot = new soundEffect("../assets/sounds/Shoot.wav", 0.6, 10);\r\n\r\nfunction soundEffect(src, soundVolume = 1.0, maxSeries) {\r\n  this.streamNum = 1;\r\n  this.streams = [];\r\n  for (let i = 0; i <= maxSeries; i++) {\r\n    this.streams.push(new Audio(src));\r\n    this.streams[i].volume = soundVolume;\r\n  }\r\n  this.play = function () {\r\n    this.streamNum = (this.streamNum + 1) % maxSeries;\r\n    this.streams[this.streamNum].play();\r\n    console.log(this.streamNum);\r\n    // console.log(this.streams);\r\n  };\r\n}\r\n\r\nnewGame();\r\n\r\nfunction StartStop() {\r\n  window.setInterval(() => {\r\n    if (!pause) {\r\n      UPDATE();\r\n    }\r\n  }, 30);\r\n}\r\nStartStop();\r\n\r\ndocument.addEventListener("keydown", keyDown);\r\ndocument.addEventListener("keyup", keyUp);\r\n\r\nfunction keyDown(e) {\r\n  if (ship.dead) {\r\n    return;\r\n  }\r\n  hue = hue + 10;\r\n  switch (e.keyCode) {\r\n    case 32:\r\n      shootLaser();\r\n      break;\r\n    case 37:\r\n      ship.rotate = ((TURN_SPEED / 180) * Math.PI) / FPS;\r\n      break;\r\n    case 38:\r\n      ship.moveForward = true;\r\n      break;\r\n    case 39:\r\n      ship.rotate = ((-TURN_SPEED / 180) * Math.PI) / FPS;\r\n      break;\r\n    case 40:\r\n      ship.moveReturn = true;\r\n      break;\r\n    case 80:\r\n      pause = !pause;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nfunction keyUp(e) {\r\n  if (ship.dead) {\r\n    return;\r\n  }\r\n  switch (e.keyCode) {\r\n    case 32:\r\n      ship.canShoot = true;\r\n      break;\r\n    case 37:\r\n      ship.rotate = 0;\r\n      break;\r\n    case 38:\r\n      ship.moveForward = false;\r\n      break;\r\n    case 39:\r\n      ship.rotate = 0;\r\n      break;\r\n    case 40:\r\n      ship.moveReturn = false;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nfunction newGame() {\r\n  level = 0;\r\n  score = 0;\r\n  lives = GAME_LIVE;\r\n  ship = newShip();\r\n  nextLevel();\r\n}\r\n\r\nfunction gameOver() {\r\n  ship.dead = true;\r\n  text = "Game Over";\r\n  textAlpha = 1.0;\r\n}\r\n\r\nfunction nextLevel() {\r\n  text = "Level " + (level + 1);\r\n  textAlpha = 1.0;\r\n  createAsteroids();\r\n}\r\n\r\nfunction drawShip(x, y, a, colour = "white") {\r\n  ctx.strokeStyle = colour;\r\n  ctx.lineWidth = SHIP_SIZE / 15;\r\n  ctx.beginPath();\r\n  ctx.moveTo(\r\n    x + (4 / 3) * ship.r * Math.cos(a),\r\n    y - (4 / 3) * ship.r * Math.sin(a)\r\n  );\r\n  ctx.lineTo(\r\n    x - ship.r * ((2 / 3) * Math.cos(a) + Math.sin(a)),\r\n    y + ship.r * ((2 / 3) * Math.sin(a) - Math.cos(a))\r\n  );\r\n  ctx.lineTo(\r\n    x - ship.r * ((2 / 3) * Math.cos(a) - Math.sin(a)),\r\n    y + ship.r * ((2 / 3) * Math.sin(a) + Math.cos(a))\r\n  );\r\n  ctx.closePath();\r\n  ctx.stroke();\r\n}\r\n\r\nfunction newShip() {\r\n  return {\r\n    x: Math.floor(Math.random() * canvas.width),\r\n    y: Math.floor(Math.random() * canvas.height),\r\n    r: SHIP_SIZE / 2,\r\n    a: Math.PI / 2,\r\n    blinkNum: 30,\r\n    blinkTime: 3,\r\n    canShoot: true,\r\n    dead: false,\r\n    exploadingTime: 0,\r\n    forward: {\r\n      x: 0,\r\n      y: 0,\r\n    },\r\n    lasers: [],\r\n    moveForward: false,\r\n    moveReturn: false,\r\n    motion: 0.7,\r\n    rotate: 0,\r\n  };\r\n}\r\n\r\nfunction createAsteroids() {\r\n  asteroids = [];\r\n  let x, y;\r\n  for (let i = 0; i < ASTEROID_NUMBER + level; i++) {\r\n    do {\r\n      x = Math.floor(Math.random() * canvas.width);\r\n      y = Math.floor(Math.random() * canvas.height);\r\n    } while (safetyBuffer(ship.x, ship.y, x, y) < ASTEROID_SIZE * 2 + ship.r);\r\n    asteroids.push(newAsteroid(x, y, Math.ceil(ASTEROID_SIZE / 2)));\r\n  }\r\n}\r\n\r\nfunction newAsteroid(x, y, r) {\r\n  let asteroidLevel = 1 + 0.1 * level;\r\n  console.log("R", r);\r\n  let asteroid = {\r\n    x: x,\r\n    y: y,\r\n    vertically: Math.random() * 2 + ASTEROID_VERT,\r\n    xv:\r\n      ((Math.random() * ASTEROID_SPEED * asteroidLevel) / FPS) *\r\n      (Math.random() < 0.5 ? 1 : -1),\r\n    yv:\r\n      ((Math.random() * ASTEROID_SPEED * asteroidLevel) / FPS) *\r\n      (Math.random() < 0.5 ? 1 : -1),\r\n    r: r,\r\n    a: Math.PI * 2,\r\n    jaggedness: [],\r\n  };\r\n\r\n  for (let i = 0; i < ASTEROID_VERT; i++) {\r\n    asteroid.jaggedness.push(\r\n      Math.random() * ASTEROID_JAGGENDESS * 2 + 1 - ASTEROID_JAGGENDESS\r\n    );\r\n  }\r\n  return asteroid;\r\n}\r\n\r\nfunction destroyAsteroid(index) {\r\n  let x = asteroids[index].x;\r\n  let y = asteroids[index].y;\r\n  let r = asteroids[index].r;\r\n\r\n  if (r == Math.ceil(ASTEROID_SIZE / 2)) {\r\n    score = score + POINTS_FOR_LARGE_ASTEROID;\r\n    asteroids.push(newAsteroid(x, y, Math.ceil(ASTEROID_SIZE / 4)));\r\n    asteroids.push(newAsteroid(x, y, Math.ceil(ASTEROID_SIZE / 4)));\r\n  } else {\r\n    score = score + POINTS_FOR_SMALL_ASTEROID;\r\n  }\r\n  asteroids.splice(index, 1);\r\n  if (asteroids.length === 0) {\r\n    level++;\r\n    nextLevel();\r\n  }\r\n}\r\n\r\nfunction explodeShip() {\r\n  ship.exploadingTime = Math.floor(SHIP_EXPLODEDURATION * FPS);\r\n}\r\n\r\nfunction safetyBuffer(x1, y1, x2, y2) {\r\n  let distansBetweenPoints = Math.sqrt(\r\n    Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)\r\n  );\r\n  return distansBetweenPoints;\r\n}\r\n\r\nfunction shootLaser() {\r\n  if (ship.canShoot) {\r\n    ship.lasers.push({\r\n      x: ship.x + (4 / 3) * ship.r * Math.cos(ship.a),\r\n      y: ship.y - (4 / 3) * ship.r * Math.sin(ship.a),\r\n      xv: (LASER_SPEED * Math.cos(ship.a)) / 50,\r\n      yv: -(LASER_SPEED * Math.sin(ship.a)) / 50,\r\n    });\r\n    shoot.play();\r\n  }\r\n  ship.canShoot = false;\r\n}\r\n\r\nfunction UPDATE() {\r\n  let blinkingOn = ship.blinkNum % INVISIBILITY === 0;\r\n  let exploding = ship.exploadingTime > 0;\r\n\r\n  // Draw Space\r\n  ctx.fillStyle = "black";\r\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n  // Draw the ship\r\n  if (!exploding) {\r\n    if (blinkingOn && !ship.dead) {\r\n      drawShip(ship.x, ship.y, ship.a);\r\n    }\r\n\r\n    // Blinking On\r\n    if (ship.blinkNum > 0) {\r\n      ship.blinkTime--;\r\n      if (ship.blinkTime === 0) {\r\n        ship.blinkTime = Math.floor(BLINK * FPS);\r\n        ship.blinkNum--;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Explode ship\r\n  else {\r\n    ctx.beginPath();\r\n    ctx.arc(ship.x, ship.y, ship.r * 1, 7, Math.PI * 2, false);\r\n    ctx.fill();\r\n    ctx.fillStyle = "red";\r\n    ctx.beginPath();\r\n    ctx.arc(ship.x, ship.y, ship.r * 1.4, Math.PI * 2, false);\r\n    ctx.fill();\r\n    ctx.fillStyle = "orange";\r\n    ctx.beginPath();\r\n    ctx.arc(ship.x, ship.y, ship.r * 1.1, Math.PI * 2, false);\r\n    ctx.fill();\r\n    ctx.fillStyle = "yellow";\r\n    ctx.beginPath();\r\n    ctx.arc(ship.x, ship.y, ship.r * 0.8, Math.PI * 2, false);\r\n    ctx.fill();\r\n    ctx.fillStyle = "white";\r\n    ctx.beginPath();\r\n    ctx.arc(ship.x, ship.y, ship.r * 0.5, Math.PI * 2, false);\r\n    ctx.fill();\r\n  }\r\n\r\n  // Move forward in space\r\n  if (ship.moveForward) {\r\n    ship.forward.x += (SHIP_FORWARD * Math.cos(ship.a)) / 10;\r\n    ship.forward.y += (SHIP_FORWARD * Math.sin(ship.a)) / 10;\r\n\r\n    // Draw Turbo Buster\r\n    if (!exploding && blinkingOn) {\r\n      ctx.fillStyle = `hsl(${hue}, 100%, 50%)`;\r\n      ctx.strokeStyle = "yellow";\r\n      ctx.lineWidth = SHIP_SIZE / 15;\r\n      ctx.beginPath();\r\n      ctx.moveTo(\r\n        ship.x - ship.r * ((2 / 3) * Math.cos(ship.a) + 0.7 * Math.sin(ship.a)),\r\n        ship.y + ship.r * ((2 / 3) * Math.sin(ship.a) - 0.7 * Math.cos(ship.a))\r\n      );\r\n      ctx.lineTo(\r\n        ship.x - ship.r * 2 * Math.cos(ship.a),\r\n        ship.y + ship.r * 2 * Math.sin(ship.a)\r\n      );\r\n      ctx.lineTo(\r\n        ship.x - ship.r * ((2 / 3) * Math.cos(ship.a) - 0.7 * Math.sin(ship.a)),\r\n        ship.y + ship.r * ((2 / 3) * Math.sin(ship.a) + 0.7 * Math.cos(ship.a))\r\n      );\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      ctx.stroke();\r\n    }\r\n\r\n    // Move return in space\r\n  } else if (ship.moveReturn && blinkingOn) {\r\n    ship.forward.y -= (SHIP_FORWARD * Math.sin(ship.a)) / 20;\r\n    ship.forward.x -= (SHIP_FORWARD * Math.cos(ship.a)) / 20;\r\n\r\n    // Draw buster in return\r\n    if (!exploding) {\r\n      ctx.fillStyle = `hsl(${hue}, 100%, 50%)`;\r\n      ctx.strokeStyle = "yellow";\r\n      ctx.lineWidth = SHIP_SIZE / 15;\r\n      ctx.beginPath();\r\n      ctx.moveTo(\r\n        ship.x - ship.r * ((2 / 3) * Math.cos(ship.a) + 0.7 * Math.sin(ship.a)),\r\n        ship.y + ship.r * ((2 / 3) * Math.sin(ship.a) - 0.7 * Math.cos(ship.a))\r\n      );\r\n      ctx.lineTo(\r\n        ship.x - ship.r * Math.cos(ship.a),\r\n        ship.y + ship.r * Math.sin(ship.a)\r\n      );\r\n      ctx.lineTo(\r\n        ship.x - ship.r * ((2 / 3) * Math.cos(ship.a) - 0.7 * Math.sin(ship.a)),\r\n        ship.y + ship.r * ((2 / 3) * Math.sin(ship.a) + 0.7 * Math.cos(ship.a))\r\n      );\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      ctx.stroke();\r\n    }\r\n  } else {\r\n    ship.forward.x -= (ship.motion * ship.forward.x) / 5;\r\n    ship.forward.y -= (ship.motion * ship.forward.y) / 5;\r\n  }\r\n\r\n  // Draw Laser\r\n  for (let i = 0; i < ship.lasers.length; i++) {\r\n    ctx.fillStyle = "magenta";\r\n    ctx.beginPath();\r\n    ctx.arc(\r\n      ship.lasers[i].x,\r\n      ship.lasers[i].y,\r\n      SHIP_SIZE / 2,\r\n      Math.PI * 2,\r\n      0,\r\n      true\r\n    );\r\n    ctx.fill();\r\n  }\r\n  for (let i = 0; i < ship.lasers.length; i++) {\r\n    ship.lasers[i].x += ship.lasers[i].xv;\r\n    ship.lasers[i].y += ship.lasers[i].yv;\r\n    // if (ship.lasers[i].x < 0) {\r\n    //   ship.lasers[i].x = canvas.width;\r\n    // } else if (ship.lasers[i].x > canvas.width) {\r\n    //   ship.lasers[i].x = 0;\r\n    // }\r\n    // if (ship.lasers[i].y < 0) {\r\n    //   ship.lasers[i].y = canvas.height;\r\n    // } else if (ship.lasers[i].y > canvas.height) {\r\n    //   ship.lasers[i].y = 0;\r\n    // }\r\n  }\r\n\r\n  // Draw level text\r\n  if (textAlpha >= 0) {\r\n    ctx.textAlign = "center";\r\n    ctx.textBaseline = "middle";\r\n    ctx.fillStyle = "rgba(200, 200, 200, " + textAlpha + ")";\r\n    ctx.font = "normal 32px algerian ";\r\n    ctx.fillText(text, canvas.width / 2, canvas.height * 0.1);\r\n    textAlpha = textAlpha - 1.0 / TEXT_FADE_TIME / FPS;\r\n  } else if (ship.dead) {\r\n    newGame();\r\n  }\r\n\r\n  // Draw lives\r\n  for (let i = 0; i < lives; i++) {\r\n    livesColour = exploding && i === lives - 1 ? "green" : "lime";\r\n    drawShip(\r\n      SHIP_SIZE + i * SHIP_SIZE * 1.2,\r\n      SHIP_SIZE,\r\n      0.5 * Math.PI,\r\n      livesColour\r\n    );\r\n  }\r\n\r\n  // Draw Score\r\n  ctx.textAlign = "right";\r\n  ctx.textBaseline = "right";\r\n  ctx.fillStyle = "rgba(200, 200, 200)";\r\n  ctx.font = "normal 18px arial";\r\n  ctx.fillText("Score: " + score, canvas.width - SHIP_SIZE, SHIP_SIZE);\r\n\r\n  // Detect laser hits on asteroids\r\n  let asteroid_x, asteroid_y, asteroid_r, laser_x, laser_y;\r\n  for (let i = asteroids.length - 1; i >= 0; i--) {\r\n    asteroid_x = asteroids[i].x;\r\n    asteroid_y = asteroids[i].y;\r\n    asteroid_r = asteroids[i].r;\r\n\r\n    for (let j = ship.lasers.length - 1; j >= 0; j--) {\r\n      laser_x = ship.lasers[j].x;\r\n      laser_y = ship.lasers[j].y;\r\n\r\n      if (safetyBuffer(asteroid_x, asteroid_y, laser_x, laser_y) < asteroid_r) {\r\n        ship.lasers.splice(j, 1);\r\n        destroyAsteroid(i, 1);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Draw asteriods\r\n  let x, y, r, a, vert, jaggedness;\r\n  for (let i = 0; i < asteroids.length; i++) {\r\n    ctx.strokeStyle = `hsl(${hue}, 100%, 50%)`;\r\n    ctx.lineWidth = SHIP_SIZE / 20;\r\n    x = asteroids[i].x;\r\n    y = asteroids[i].y;\r\n    a = asteroids[i].a;\r\n    r = asteroids[i].r;\r\n    vert = asteroids[i].vertically;\r\n    jaggedness = asteroids[i].jaggedness;\r\n    ctx.beginPath();\r\n    ctx.moveTo(\r\n      x + r * jaggedness[0] * Math.cos(a),\r\n      y + r * jaggedness[0] * Math.sin(a)\r\n    );\r\n    for (let j = 1; j < vert; j++) {\r\n      ctx.lineTo(\r\n        x + r * jaggedness[j] * Math.cos(a + (j * Math.PI * 2) / vert),\r\n        y + r * jaggedness[j] * Math.sin(a + (j * Math.PI * 2) / vert)\r\n      );\r\n    }\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n  }\r\n\r\n  // Check for collision\r\n  if (!exploding) {\r\n    if (ship.blinkNum === 0) {\r\n      for (let i = 0; i < asteroids.length; i++) {\r\n        if (\r\n          safetyBuffer(ship.x, ship.y, asteroids[i].x, asteroids[i].y) <\r\n          ship.r + asteroids[i].r\r\n        ) {\r\n          explodeShip();\r\n          destroyAsteroid(i);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Rotate Ship\r\n    ship.a = ship.a + ship.rotate;\r\n\r\n    // Motion Ship\r\n    ship.x = ship.x + ship.forward.x;\r\n    ship.y = ship.y - ship.forward.y;\r\n  } else {\r\n    ship.exploadingTime--;\r\n    if (ship.exploadingTime === 0) {\r\n      lives--;\r\n      if (lives === 0) {\r\n        gameOver();\r\n      } else {\r\n        ship = newShip();\r\n      }\r\n    }\r\n  }\r\n\r\n  // Edge of screen\r\n  if (ship.x < 0 - ship.r) {\r\n    ship.x = canvas.width + ship.r;\r\n  } else if (ship.x > canvas.width + ship.r) {\r\n    ship.x = 0 - ship.r;\r\n  }\r\n  if (ship.y < 0 - ship.r) {\r\n    ship.y = canvas.height + ship.r;\r\n  } else if (ship.y > canvas.height + ship.r) {\r\n    ship.y = 0 - ship.r;\r\n  }\r\n\r\n  // Move the asteroids\r\n  for (let i = 0; i < asteroids.length; i++) {\r\n    asteroids[i].x = asteroids[i].x + asteroids[i].xv / 2;\r\n    asteroids[i].y = asteroids[i].y + asteroids[i].yv * 2;\r\n\r\n    // Edge of screen asteroids\r\n    if (asteroids[i].x < 0 - asteroids[i].r) {\r\n      asteroids[i].x = canvas.width + asteroids[i].r;\r\n    } else if (asteroids[i].x > canvas.width + asteroids[i].r) {\r\n      asteroids[i].x = 0 - asteroids[i].r;\r\n    }\r\n    if (asteroids[i].y < 0 - asteroids[i].r) {\r\n      asteroids[i].y = canvas.height + asteroids[i].r;\r\n    } else if (asteroids[i].y > canvas.height + asteroids[i].r) {\r\n      asteroids[i].y = 0 - asteroids[i].r;\r\n    }\r\n  }\r\n}\r\n\r\n// function handleKey(event) {\r\n//   console.log(event.keyCode);\r\n// }\r\n// window.addEventListener("keydown", handleKey);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFlOztBQUVmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixnQkFBZ0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2QkFBNkI7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2QkFBNkIsSUFBSTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2QkFBNkIsSUFBSTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsd0JBQXdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix3QkFBd0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixXQUFXO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQ0FBb0MsUUFBUTtBQUM1QztBQUNBO0FBQ0E7O0FBRUEsd0NBQXdDLFFBQVE7QUFDaEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2Qyw2QkFBNkIsSUFBSTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsVUFBVTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixzQkFBc0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihcInVzZSBzdHJpY3RcIik7XHJcblxyXG5pZiAoXCJzZXJ2aWNlV29ya2VyXCIgaW4gbmF2aWdhdG9yKSB7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKFwic2VydmljZXdvcmtlci5qc1wiKS50aGVuKFxyXG4gICAgICBmdW5jdGlvbiAocmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICBcIlNlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwgd2l0aCBzY29wZTogXCIsXHJcbiAgICAgICAgICByZWdpc3RyYXRpb24uc2NvcGVcclxuICAgICAgICApO1xyXG4gICAgICB9LFxyXG4gICAgICBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6IFwiLCBlcnIpO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0pO1xyXG59XHJcbmNvbnNvbGUubG9nKGBpdCB3b3Jrc2ApO1xyXG5cclxuY29uc3QgQVNURVJPSURfTlVNQkVSID0gMjtcclxuY29uc3QgQVNURVJPSURfU0laRSA9IDUwO1xyXG5jb25zdCBBU1RFUk9JRF9TUEVFRCA9IDQwO1xyXG5jb25zdCBBU1RFUk9JRF9WRVJUID0gMTA7XHJcbmNvbnN0IEFTVEVST0lEX0pBR0dFTkRFU1MgPSAwLjU7XHJcbmNvbnN0IEJMSU5LID0gMC4xO1xyXG5jb25zdCBGUFMgPSAzMDtcclxuY29uc3QgR0FNRV9MSVZFID0gMztcclxuY29uc3QgSU5WSVNJQklMSVRZID0gMztcclxuY29uc3QgTEFTRVJfTUFYID0gMTIwO1xyXG5jb25zdCBMQVNFUl9TUEVFRCA9IDUwMDtcclxuY29uc3QgUE9JTlRTX0ZPUl9MQVJHRV9BU1RFUk9JRCA9IDEwO1xyXG5jb25zdCBQT0lOVFNfRk9SX1NNQUxMX0FTVEVST0lEID0gMjA7XHJcbmNvbnN0IFNISVBfU0laRSA9IDMwO1xyXG5jb25zdCBTSElQX0ZPUldBUkQgPSA1O1xyXG5jb25zdCBTSElQX0VYUExPREVEVVJBVElPTiA9IDE7XHJcbmNvbnN0IFRVUk5fU1BFRUQgPSAyNzA7XHJcbmNvbnN0IFRFWFRfRkFERV9USU1FID0gMztcclxuXHJcbmxldCBhc3Rlcm9pZHMgPSBbXTtcclxubGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZUNhbnZhc1wiKTtcclxubGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbmxldCBodWUgPSAwO1xyXG5sZXQgbGV2ZWw7XHJcbmxldCBsaXZlcyA9IDM7XHJcbmxldCBsaXZlc0NvbG91cjtcclxubGV0IHBhdXNlID0gZmFsc2U7XHJcbmxldCBzaGlwO1xyXG5sZXQgdGV4dDtcclxubGV0IHRleHRBbHBoYTtcclxubGV0IHNjb3JlO1xyXG5cclxubGV0IHNob290ID0gbmV3IHNvdW5kRWZmZWN0KFwiLi4vYXNzZXRzL3NvdW5kcy9TaG9vdC53YXZcIiwgMC42LCAxMCk7XHJcblxyXG5mdW5jdGlvbiBzb3VuZEVmZmVjdChzcmMsIHNvdW5kVm9sdW1lID0gMS4wLCBtYXhTZXJpZXMpIHtcclxuICB0aGlzLnN0cmVhbU51bSA9IDE7XHJcbiAgdGhpcy5zdHJlYW1zID0gW107XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbWF4U2VyaWVzOyBpKyspIHtcclxuICAgIHRoaXMuc3RyZWFtcy5wdXNoKG5ldyBBdWRpbyhzcmMpKTtcclxuICAgIHRoaXMuc3RyZWFtc1tpXS52b2x1bWUgPSBzb3VuZFZvbHVtZTtcclxuICB9XHJcbiAgdGhpcy5wbGF5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5zdHJlYW1OdW0gPSAodGhpcy5zdHJlYW1OdW0gKyAxKSAlIG1heFNlcmllcztcclxuICAgIHRoaXMuc3RyZWFtc1t0aGlzLnN0cmVhbU51bV0ucGxheSgpO1xyXG4gICAgY29uc29sZS5sb2codGhpcy5zdHJlYW1OdW0pO1xyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5zdHJlYW1zKTtcclxuICB9O1xyXG59XHJcblxyXG5uZXdHYW1lKCk7XHJcblxyXG5mdW5jdGlvbiBTdGFydFN0b3AoKSB7XHJcbiAgd2luZG93LnNldEludGVydmFsKCgpID0+IHtcclxuICAgIGlmICghcGF1c2UpIHtcclxuICAgICAgVVBEQVRFKCk7XHJcbiAgICB9XHJcbiAgfSwgMzApO1xyXG59XHJcblN0YXJ0U3RvcCgpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwga2V5RG93bik7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBrZXlVcCk7XHJcblxyXG5mdW5jdGlvbiBrZXlEb3duKGUpIHtcclxuICBpZiAoc2hpcC5kZWFkKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGh1ZSA9IGh1ZSArIDEwO1xyXG4gIHN3aXRjaCAoZS5rZXlDb2RlKSB7XHJcbiAgICBjYXNlIDMyOlxyXG4gICAgICBzaG9vdExhc2VyKCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAzNzpcclxuICAgICAgc2hpcC5yb3RhdGUgPSAoKFRVUk5fU1BFRUQgLyAxODApICogTWF0aC5QSSkgLyBGUFM7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAzODpcclxuICAgICAgc2hpcC5tb3ZlRm9yd2FyZCA9IHRydWU7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAzOTpcclxuICAgICAgc2hpcC5yb3RhdGUgPSAoKC1UVVJOX1NQRUVEIC8gMTgwKSAqIE1hdGguUEkpIC8gRlBTO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgNDA6XHJcbiAgICAgIHNoaXAubW92ZVJldHVybiA9IHRydWU7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSA4MDpcclxuICAgICAgcGF1c2UgPSAhcGF1c2U7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBrZXlVcChlKSB7XHJcbiAgaWYgKHNoaXAuZGVhZCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgY2FzZSAzMjpcclxuICAgICAgc2hpcC5jYW5TaG9vdCA9IHRydWU7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAzNzpcclxuICAgICAgc2hpcC5yb3RhdGUgPSAwO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgMzg6XHJcbiAgICAgIHNoaXAubW92ZUZvcndhcmQgPSBmYWxzZTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDM5OlxyXG4gICAgICBzaGlwLnJvdGF0ZSA9IDA7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSA0MDpcclxuICAgICAgc2hpcC5tb3ZlUmV0dXJuID0gZmFsc2U7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBuZXdHYW1lKCkge1xyXG4gIGxldmVsID0gMDtcclxuICBzY29yZSA9IDA7XHJcbiAgbGl2ZXMgPSBHQU1FX0xJVkU7XHJcbiAgc2hpcCA9IG5ld1NoaXAoKTtcclxuICBuZXh0TGV2ZWwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2FtZU92ZXIoKSB7XHJcbiAgc2hpcC5kZWFkID0gdHJ1ZTtcclxuICB0ZXh0ID0gXCJHYW1lIE92ZXJcIjtcclxuICB0ZXh0QWxwaGEgPSAxLjA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5leHRMZXZlbCgpIHtcclxuICB0ZXh0ID0gXCJMZXZlbCBcIiArIChsZXZlbCArIDEpO1xyXG4gIHRleHRBbHBoYSA9IDEuMDtcclxuICBjcmVhdGVBc3Rlcm9pZHMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1NoaXAoeCwgeSwgYSwgY29sb3VyID0gXCJ3aGl0ZVwiKSB7XHJcbiAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3VyO1xyXG4gIGN0eC5saW5lV2lkdGggPSBTSElQX1NJWkUgLyAxNTtcclxuICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgY3R4Lm1vdmVUbyhcclxuICAgIHggKyAoNCAvIDMpICogc2hpcC5yICogTWF0aC5jb3MoYSksXHJcbiAgICB5IC0gKDQgLyAzKSAqIHNoaXAuciAqIE1hdGguc2luKGEpXHJcbiAgKTtcclxuICBjdHgubGluZVRvKFxyXG4gICAgeCAtIHNoaXAuciAqICgoMiAvIDMpICogTWF0aC5jb3MoYSkgKyBNYXRoLnNpbihhKSksXHJcbiAgICB5ICsgc2hpcC5yICogKCgyIC8gMykgKiBNYXRoLnNpbihhKSAtIE1hdGguY29zKGEpKVxyXG4gICk7XHJcbiAgY3R4LmxpbmVUbyhcclxuICAgIHggLSBzaGlwLnIgKiAoKDIgLyAzKSAqIE1hdGguY29zKGEpIC0gTWF0aC5zaW4oYSkpLFxyXG4gICAgeSArIHNoaXAuciAqICgoMiAvIDMpICogTWF0aC5zaW4oYSkgKyBNYXRoLmNvcyhhKSlcclxuICApO1xyXG4gIGN0eC5jbG9zZVBhdGgoKTtcclxuICBjdHguc3Ryb2tlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5ld1NoaXAoKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHg6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNhbnZhcy53aWR0aCksXHJcbiAgICB5OiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjYW52YXMuaGVpZ2h0KSxcclxuICAgIHI6IFNISVBfU0laRSAvIDIsXHJcbiAgICBhOiBNYXRoLlBJIC8gMixcclxuICAgIGJsaW5rTnVtOiAzMCxcclxuICAgIGJsaW5rVGltZTogMyxcclxuICAgIGNhblNob290OiB0cnVlLFxyXG4gICAgZGVhZDogZmFsc2UsXHJcbiAgICBleHBsb2FkaW5nVGltZTogMCxcclxuICAgIGZvcndhcmQ6IHtcclxuICAgICAgeDogMCxcclxuICAgICAgeTogMCxcclxuICAgIH0sXHJcbiAgICBsYXNlcnM6IFtdLFxyXG4gICAgbW92ZUZvcndhcmQ6IGZhbHNlLFxyXG4gICAgbW92ZVJldHVybjogZmFsc2UsXHJcbiAgICBtb3Rpb246IDAuNyxcclxuICAgIHJvdGF0ZTogMCxcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVBc3Rlcm9pZHMoKSB7XHJcbiAgYXN0ZXJvaWRzID0gW107XHJcbiAgbGV0IHgsIHk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBBU1RFUk9JRF9OVU1CRVIgKyBsZXZlbDsgaSsrKSB7XHJcbiAgICBkbyB7XHJcbiAgICAgIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjYW52YXMud2lkdGgpO1xyXG4gICAgICB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2FudmFzLmhlaWdodCk7XHJcbiAgICB9IHdoaWxlIChzYWZldHlCdWZmZXIoc2hpcC54LCBzaGlwLnksIHgsIHkpIDwgQVNURVJPSURfU0laRSAqIDIgKyBzaGlwLnIpO1xyXG4gICAgYXN0ZXJvaWRzLnB1c2gobmV3QXN0ZXJvaWQoeCwgeSwgTWF0aC5jZWlsKEFTVEVST0lEX1NJWkUgLyAyKSkpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbmV3QXN0ZXJvaWQoeCwgeSwgcikge1xyXG4gIGxldCBhc3Rlcm9pZExldmVsID0gMSArIDAuMSAqIGxldmVsO1xyXG4gIGNvbnNvbGUubG9nKFwiUlwiLCByKTtcclxuICBsZXQgYXN0ZXJvaWQgPSB7XHJcbiAgICB4OiB4LFxyXG4gICAgeTogeSxcclxuICAgIHZlcnRpY2FsbHk6IE1hdGgucmFuZG9tKCkgKiAyICsgQVNURVJPSURfVkVSVCxcclxuICAgIHh2OlxyXG4gICAgICAoKE1hdGgucmFuZG9tKCkgKiBBU1RFUk9JRF9TUEVFRCAqIGFzdGVyb2lkTGV2ZWwpIC8gRlBTKSAqXHJcbiAgICAgIChNYXRoLnJhbmRvbSgpIDwgMC41ID8gMSA6IC0xKSxcclxuICAgIHl2OlxyXG4gICAgICAoKE1hdGgucmFuZG9tKCkgKiBBU1RFUk9JRF9TUEVFRCAqIGFzdGVyb2lkTGV2ZWwpIC8gRlBTKSAqXHJcbiAgICAgIChNYXRoLnJhbmRvbSgpIDwgMC41ID8gMSA6IC0xKSxcclxuICAgIHI6IHIsXHJcbiAgICBhOiBNYXRoLlBJICogMixcclxuICAgIGphZ2dlZG5lc3M6IFtdLFxyXG4gIH07XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgQVNURVJPSURfVkVSVDsgaSsrKSB7XHJcbiAgICBhc3Rlcm9pZC5qYWdnZWRuZXNzLnB1c2goXHJcbiAgICAgIE1hdGgucmFuZG9tKCkgKiBBU1RFUk9JRF9KQUdHRU5ERVNTICogMiArIDEgLSBBU1RFUk9JRF9KQUdHRU5ERVNTXHJcbiAgICApO1xyXG4gIH1cclxuICByZXR1cm4gYXN0ZXJvaWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlc3Ryb3lBc3Rlcm9pZChpbmRleCkge1xyXG4gIGxldCB4ID0gYXN0ZXJvaWRzW2luZGV4XS54O1xyXG4gIGxldCB5ID0gYXN0ZXJvaWRzW2luZGV4XS55O1xyXG4gIGxldCByID0gYXN0ZXJvaWRzW2luZGV4XS5yO1xyXG5cclxuICBpZiAociA9PSBNYXRoLmNlaWwoQVNURVJPSURfU0laRSAvIDIpKSB7XHJcbiAgICBzY29yZSA9IHNjb3JlICsgUE9JTlRTX0ZPUl9MQVJHRV9BU1RFUk9JRDtcclxuICAgIGFzdGVyb2lkcy5wdXNoKG5ld0FzdGVyb2lkKHgsIHksIE1hdGguY2VpbChBU1RFUk9JRF9TSVpFIC8gNCkpKTtcclxuICAgIGFzdGVyb2lkcy5wdXNoKG5ld0FzdGVyb2lkKHgsIHksIE1hdGguY2VpbChBU1RFUk9JRF9TSVpFIC8gNCkpKTtcclxuICB9IGVsc2Uge1xyXG4gICAgc2NvcmUgPSBzY29yZSArIFBPSU5UU19GT1JfU01BTExfQVNURVJPSUQ7XHJcbiAgfVxyXG4gIGFzdGVyb2lkcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gIGlmIChhc3Rlcm9pZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICBsZXZlbCsrO1xyXG4gICAgbmV4dExldmVsKCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBleHBsb2RlU2hpcCgpIHtcclxuICBzaGlwLmV4cGxvYWRpbmdUaW1lID0gTWF0aC5mbG9vcihTSElQX0VYUExPREVEVVJBVElPTiAqIEZQUyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhZmV0eUJ1ZmZlcih4MSwgeTEsIHgyLCB5Mikge1xyXG4gIGxldCBkaXN0YW5zQmV0d2VlblBvaW50cyA9IE1hdGguc3FydChcclxuICAgIE1hdGgucG93KHgyIC0geDEsIDIpICsgTWF0aC5wb3coeTIgLSB5MSwgMilcclxuICApO1xyXG4gIHJldHVybiBkaXN0YW5zQmV0d2VlblBvaW50cztcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvb3RMYXNlcigpIHtcclxuICBpZiAoc2hpcC5jYW5TaG9vdCkge1xyXG4gICAgc2hpcC5sYXNlcnMucHVzaCh7XHJcbiAgICAgIHg6IHNoaXAueCArICg0IC8gMykgKiBzaGlwLnIgKiBNYXRoLmNvcyhzaGlwLmEpLFxyXG4gICAgICB5OiBzaGlwLnkgLSAoNCAvIDMpICogc2hpcC5yICogTWF0aC5zaW4oc2hpcC5hKSxcclxuICAgICAgeHY6IChMQVNFUl9TUEVFRCAqIE1hdGguY29zKHNoaXAuYSkpIC8gNTAsXHJcbiAgICAgIHl2OiAtKExBU0VSX1NQRUVEICogTWF0aC5zaW4oc2hpcC5hKSkgLyA1MCxcclxuICAgIH0pO1xyXG4gICAgc2hvb3QucGxheSgpO1xyXG4gIH1cclxuICBzaGlwLmNhblNob290ID0gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFVQREFURSgpIHtcclxuICBsZXQgYmxpbmtpbmdPbiA9IHNoaXAuYmxpbmtOdW0gJSBJTlZJU0lCSUxJVFkgPT09IDA7XHJcbiAgbGV0IGV4cGxvZGluZyA9IHNoaXAuZXhwbG9hZGluZ1RpbWUgPiAwO1xyXG5cclxuICAvLyBEcmF3IFNwYWNlXHJcbiAgY3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgLy8gRHJhdyB0aGUgc2hpcFxyXG4gIGlmICghZXhwbG9kaW5nKSB7XHJcbiAgICBpZiAoYmxpbmtpbmdPbiAmJiAhc2hpcC5kZWFkKSB7XHJcbiAgICAgIGRyYXdTaGlwKHNoaXAueCwgc2hpcC55LCBzaGlwLmEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJsaW5raW5nIE9uXHJcbiAgICBpZiAoc2hpcC5ibGlua051bSA+IDApIHtcclxuICAgICAgc2hpcC5ibGlua1RpbWUtLTtcclxuICAgICAgaWYgKHNoaXAuYmxpbmtUaW1lID09PSAwKSB7XHJcbiAgICAgICAgc2hpcC5ibGlua1RpbWUgPSBNYXRoLmZsb29yKEJMSU5LICogRlBTKTtcclxuICAgICAgICBzaGlwLmJsaW5rTnVtLS07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEV4cGxvZGUgc2hpcFxyXG4gIGVsc2Uge1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4LmFyYyhzaGlwLngsIHNoaXAueSwgc2hpcC5yICogMSwgNywgTWF0aC5QSSAqIDIsIGZhbHNlKTtcclxuICAgIGN0eC5maWxsKCk7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gXCJyZWRcIjtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5hcmMoc2hpcC54LCBzaGlwLnksIHNoaXAuciAqIDEuNCwgTWF0aC5QSSAqIDIsIGZhbHNlKTtcclxuICAgIGN0eC5maWxsKCk7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gXCJvcmFuZ2VcIjtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5hcmMoc2hpcC54LCBzaGlwLnksIHNoaXAuciAqIDEuMSwgTWF0aC5QSSAqIDIsIGZhbHNlKTtcclxuICAgIGN0eC5maWxsKCk7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gXCJ5ZWxsb3dcIjtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5hcmMoc2hpcC54LCBzaGlwLnksIHNoaXAuciAqIDAuOCwgTWF0aC5QSSAqIDIsIGZhbHNlKTtcclxuICAgIGN0eC5maWxsKCk7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4LmFyYyhzaGlwLngsIHNoaXAueSwgc2hpcC5yICogMC41LCBNYXRoLlBJICogMiwgZmFsc2UpO1xyXG4gICAgY3R4LmZpbGwoKTtcclxuICB9XHJcblxyXG4gIC8vIE1vdmUgZm9yd2FyZCBpbiBzcGFjZVxyXG4gIGlmIChzaGlwLm1vdmVGb3J3YXJkKSB7XHJcbiAgICBzaGlwLmZvcndhcmQueCArPSAoU0hJUF9GT1JXQVJEICogTWF0aC5jb3Moc2hpcC5hKSkgLyAxMDtcclxuICAgIHNoaXAuZm9yd2FyZC55ICs9IChTSElQX0ZPUldBUkQgKiBNYXRoLnNpbihzaGlwLmEpKSAvIDEwO1xyXG5cclxuICAgIC8vIERyYXcgVHVyYm8gQnVzdGVyXHJcbiAgICBpZiAoIWV4cGxvZGluZyAmJiBibGlua2luZ09uKSB7XHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBgaHNsKCR7aHVlfSwgMTAwJSwgNTAlKWA7XHJcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwieWVsbG93XCI7XHJcbiAgICAgIGN0eC5saW5lV2lkdGggPSBTSElQX1NJWkUgLyAxNTtcclxuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICBjdHgubW92ZVRvKFxyXG4gICAgICAgIHNoaXAueCAtIHNoaXAuciAqICgoMiAvIDMpICogTWF0aC5jb3Moc2hpcC5hKSArIDAuNyAqIE1hdGguc2luKHNoaXAuYSkpLFxyXG4gICAgICAgIHNoaXAueSArIHNoaXAuciAqICgoMiAvIDMpICogTWF0aC5zaW4oc2hpcC5hKSAtIDAuNyAqIE1hdGguY29zKHNoaXAuYSkpXHJcbiAgICAgICk7XHJcbiAgICAgIGN0eC5saW5lVG8oXHJcbiAgICAgICAgc2hpcC54IC0gc2hpcC5yICogMiAqIE1hdGguY29zKHNoaXAuYSksXHJcbiAgICAgICAgc2hpcC55ICsgc2hpcC5yICogMiAqIE1hdGguc2luKHNoaXAuYSlcclxuICAgICAgKTtcclxuICAgICAgY3R4LmxpbmVUbyhcclxuICAgICAgICBzaGlwLnggLSBzaGlwLnIgKiAoKDIgLyAzKSAqIE1hdGguY29zKHNoaXAuYSkgLSAwLjcgKiBNYXRoLnNpbihzaGlwLmEpKSxcclxuICAgICAgICBzaGlwLnkgKyBzaGlwLnIgKiAoKDIgLyAzKSAqIE1hdGguc2luKHNoaXAuYSkgKyAwLjcgKiBNYXRoLmNvcyhzaGlwLmEpKVxyXG4gICAgICApO1xyXG4gICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNb3ZlIHJldHVybiBpbiBzcGFjZVxyXG4gIH0gZWxzZSBpZiAoc2hpcC5tb3ZlUmV0dXJuICYmIGJsaW5raW5nT24pIHtcclxuICAgIHNoaXAuZm9yd2FyZC55IC09IChTSElQX0ZPUldBUkQgKiBNYXRoLnNpbihzaGlwLmEpKSAvIDIwO1xyXG4gICAgc2hpcC5mb3J3YXJkLnggLT0gKFNISVBfRk9SV0FSRCAqIE1hdGguY29zKHNoaXAuYSkpIC8gMjA7XHJcblxyXG4gICAgLy8gRHJhdyBidXN0ZXIgaW4gcmV0dXJuXHJcbiAgICBpZiAoIWV4cGxvZGluZykge1xyXG4gICAgICBjdHguZmlsbFN0eWxlID0gYGhzbCgke2h1ZX0sIDEwMCUsIDUwJSlgO1xyXG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcInllbGxvd1wiO1xyXG4gICAgICBjdHgubGluZVdpZHRoID0gU0hJUF9TSVpFIC8gMTU7XHJcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgY3R4Lm1vdmVUbyhcclxuICAgICAgICBzaGlwLnggLSBzaGlwLnIgKiAoKDIgLyAzKSAqIE1hdGguY29zKHNoaXAuYSkgKyAwLjcgKiBNYXRoLnNpbihzaGlwLmEpKSxcclxuICAgICAgICBzaGlwLnkgKyBzaGlwLnIgKiAoKDIgLyAzKSAqIE1hdGguc2luKHNoaXAuYSkgLSAwLjcgKiBNYXRoLmNvcyhzaGlwLmEpKVxyXG4gICAgICApO1xyXG4gICAgICBjdHgubGluZVRvKFxyXG4gICAgICAgIHNoaXAueCAtIHNoaXAuciAqIE1hdGguY29zKHNoaXAuYSksXHJcbiAgICAgICAgc2hpcC55ICsgc2hpcC5yICogTWF0aC5zaW4oc2hpcC5hKVxyXG4gICAgICApO1xyXG4gICAgICBjdHgubGluZVRvKFxyXG4gICAgICAgIHNoaXAueCAtIHNoaXAuciAqICgoMiAvIDMpICogTWF0aC5jb3Moc2hpcC5hKSAtIDAuNyAqIE1hdGguc2luKHNoaXAuYSkpLFxyXG4gICAgICAgIHNoaXAueSArIHNoaXAuciAqICgoMiAvIDMpICogTWF0aC5zaW4oc2hpcC5hKSArIDAuNyAqIE1hdGguY29zKHNoaXAuYSkpXHJcbiAgICAgICk7XHJcbiAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBzaGlwLmZvcndhcmQueCAtPSAoc2hpcC5tb3Rpb24gKiBzaGlwLmZvcndhcmQueCkgLyA1O1xyXG4gICAgc2hpcC5mb3J3YXJkLnkgLT0gKHNoaXAubW90aW9uICogc2hpcC5mb3J3YXJkLnkpIC8gNTtcclxuICB9XHJcblxyXG4gIC8vIERyYXcgTGFzZXJcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAubGFzZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gXCJtYWdlbnRhXCI7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHguYXJjKFxyXG4gICAgICBzaGlwLmxhc2Vyc1tpXS54LFxyXG4gICAgICBzaGlwLmxhc2Vyc1tpXS55LFxyXG4gICAgICBTSElQX1NJWkUgLyAyLFxyXG4gICAgICBNYXRoLlBJICogMixcclxuICAgICAgMCxcclxuICAgICAgdHJ1ZVxyXG4gICAgKTtcclxuICAgIGN0eC5maWxsKCk7XHJcbiAgfVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sYXNlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgIHNoaXAubGFzZXJzW2ldLnggKz0gc2hpcC5sYXNlcnNbaV0ueHY7XHJcbiAgICBzaGlwLmxhc2Vyc1tpXS55ICs9IHNoaXAubGFzZXJzW2ldLnl2O1xyXG4gICAgLy8gaWYgKHNoaXAubGFzZXJzW2ldLnggPCAwKSB7XHJcbiAgICAvLyAgIHNoaXAubGFzZXJzW2ldLnggPSBjYW52YXMud2lkdGg7XHJcbiAgICAvLyB9IGVsc2UgaWYgKHNoaXAubGFzZXJzW2ldLnggPiBjYW52YXMud2lkdGgpIHtcclxuICAgIC8vICAgc2hpcC5sYXNlcnNbaV0ueCA9IDA7XHJcbiAgICAvLyB9XHJcbiAgICAvLyBpZiAoc2hpcC5sYXNlcnNbaV0ueSA8IDApIHtcclxuICAgIC8vICAgc2hpcC5sYXNlcnNbaV0ueSA9IGNhbnZhcy5oZWlnaHQ7XHJcbiAgICAvLyB9IGVsc2UgaWYgKHNoaXAubGFzZXJzW2ldLnkgPiBjYW52YXMuaGVpZ2h0KSB7XHJcbiAgICAvLyAgIHNoaXAubGFzZXJzW2ldLnkgPSAwO1xyXG4gICAgLy8gfVxyXG4gIH1cclxuXHJcbiAgLy8gRHJhdyBsZXZlbCB0ZXh0XHJcbiAgaWYgKHRleHRBbHBoYSA+PSAwKSB7XHJcbiAgICBjdHgudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcclxuICAgIGN0eC50ZXh0QmFzZWxpbmUgPSBcIm1pZGRsZVwiO1xyXG4gICAgY3R4LmZpbGxTdHlsZSA9IFwicmdiYSgyMDAsIDIwMCwgMjAwLCBcIiArIHRleHRBbHBoYSArIFwiKVwiO1xyXG4gICAgY3R4LmZvbnQgPSBcIm5vcm1hbCAzMnB4IGFsZ2VyaWFuIFwiO1xyXG4gICAgY3R4LmZpbGxUZXh0KHRleHQsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgKiAwLjEpO1xyXG4gICAgdGV4dEFscGhhID0gdGV4dEFscGhhIC0gMS4wIC8gVEVYVF9GQURFX1RJTUUgLyBGUFM7XHJcbiAgfSBlbHNlIGlmIChzaGlwLmRlYWQpIHtcclxuICAgIG5ld0dhbWUoKTtcclxuICB9XHJcblxyXG4gIC8vIERyYXcgbGl2ZXNcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpdmVzOyBpKyspIHtcclxuICAgIGxpdmVzQ29sb3VyID0gZXhwbG9kaW5nICYmIGkgPT09IGxpdmVzIC0gMSA/IFwiZ3JlZW5cIiA6IFwibGltZVwiO1xyXG4gICAgZHJhd1NoaXAoXHJcbiAgICAgIFNISVBfU0laRSArIGkgKiBTSElQX1NJWkUgKiAxLjIsXHJcbiAgICAgIFNISVBfU0laRSxcclxuICAgICAgMC41ICogTWF0aC5QSSxcclxuICAgICAgbGl2ZXNDb2xvdXJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBEcmF3IFNjb3JlXHJcbiAgY3R4LnRleHRBbGlnbiA9IFwicmlnaHRcIjtcclxuICBjdHgudGV4dEJhc2VsaW5lID0gXCJyaWdodFwiO1xyXG4gIGN0eC5maWxsU3R5bGUgPSBcInJnYmEoMjAwLCAyMDAsIDIwMClcIjtcclxuICBjdHguZm9udCA9IFwibm9ybWFsIDE4cHggYXJpYWxcIjtcclxuICBjdHguZmlsbFRleHQoXCJTY29yZTogXCIgKyBzY29yZSwgY2FudmFzLndpZHRoIC0gU0hJUF9TSVpFLCBTSElQX1NJWkUpO1xyXG5cclxuICAvLyBEZXRlY3QgbGFzZXIgaGl0cyBvbiBhc3Rlcm9pZHNcclxuICBsZXQgYXN0ZXJvaWRfeCwgYXN0ZXJvaWRfeSwgYXN0ZXJvaWRfciwgbGFzZXJfeCwgbGFzZXJfeTtcclxuICBmb3IgKGxldCBpID0gYXN0ZXJvaWRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICBhc3Rlcm9pZF94ID0gYXN0ZXJvaWRzW2ldLng7XHJcbiAgICBhc3Rlcm9pZF95ID0gYXN0ZXJvaWRzW2ldLnk7XHJcbiAgICBhc3Rlcm9pZF9yID0gYXN0ZXJvaWRzW2ldLnI7XHJcblxyXG4gICAgZm9yIChsZXQgaiA9IHNoaXAubGFzZXJzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XHJcbiAgICAgIGxhc2VyX3ggPSBzaGlwLmxhc2Vyc1tqXS54O1xyXG4gICAgICBsYXNlcl95ID0gc2hpcC5sYXNlcnNbal0ueTtcclxuXHJcbiAgICAgIGlmIChzYWZldHlCdWZmZXIoYXN0ZXJvaWRfeCwgYXN0ZXJvaWRfeSwgbGFzZXJfeCwgbGFzZXJfeSkgPCBhc3Rlcm9pZF9yKSB7XHJcbiAgICAgICAgc2hpcC5sYXNlcnMuc3BsaWNlKGosIDEpO1xyXG4gICAgICAgIGRlc3Ryb3lBc3Rlcm9pZChpLCAxKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRHJhdyBhc3RlcmlvZHNcclxuICBsZXQgeCwgeSwgciwgYSwgdmVydCwgamFnZ2VkbmVzcztcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGFzdGVyb2lkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gYGhzbCgke2h1ZX0sIDEwMCUsIDUwJSlgO1xyXG4gICAgY3R4LmxpbmVXaWR0aCA9IFNISVBfU0laRSAvIDIwO1xyXG4gICAgeCA9IGFzdGVyb2lkc1tpXS54O1xyXG4gICAgeSA9IGFzdGVyb2lkc1tpXS55O1xyXG4gICAgYSA9IGFzdGVyb2lkc1tpXS5hO1xyXG4gICAgciA9IGFzdGVyb2lkc1tpXS5yO1xyXG4gICAgdmVydCA9IGFzdGVyb2lkc1tpXS52ZXJ0aWNhbGx5O1xyXG4gICAgamFnZ2VkbmVzcyA9IGFzdGVyb2lkc1tpXS5qYWdnZWRuZXNzO1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4Lm1vdmVUbyhcclxuICAgICAgeCArIHIgKiBqYWdnZWRuZXNzWzBdICogTWF0aC5jb3MoYSksXHJcbiAgICAgIHkgKyByICogamFnZ2VkbmVzc1swXSAqIE1hdGguc2luKGEpXHJcbiAgICApO1xyXG4gICAgZm9yIChsZXQgaiA9IDE7IGogPCB2ZXJ0OyBqKyspIHtcclxuICAgICAgY3R4LmxpbmVUbyhcclxuICAgICAgICB4ICsgciAqIGphZ2dlZG5lc3Nbal0gKiBNYXRoLmNvcyhhICsgKGogKiBNYXRoLlBJICogMikgLyB2ZXJ0KSxcclxuICAgICAgICB5ICsgciAqIGphZ2dlZG5lc3Nbal0gKiBNYXRoLnNpbihhICsgKGogKiBNYXRoLlBJICogMikgLyB2ZXJ0KVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgY3R4LnN0cm9rZSgpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgZm9yIGNvbGxpc2lvblxyXG4gIGlmICghZXhwbG9kaW5nKSB7XHJcbiAgICBpZiAoc2hpcC5ibGlua051bSA9PT0gMCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFzdGVyb2lkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHNhZmV0eUJ1ZmZlcihzaGlwLngsIHNoaXAueSwgYXN0ZXJvaWRzW2ldLngsIGFzdGVyb2lkc1tpXS55KSA8XHJcbiAgICAgICAgICBzaGlwLnIgKyBhc3Rlcm9pZHNbaV0uclxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgZXhwbG9kZVNoaXAoKTtcclxuICAgICAgICAgIGRlc3Ryb3lBc3Rlcm9pZChpKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFJvdGF0ZSBTaGlwXHJcbiAgICBzaGlwLmEgPSBzaGlwLmEgKyBzaGlwLnJvdGF0ZTtcclxuXHJcbiAgICAvLyBNb3Rpb24gU2hpcFxyXG4gICAgc2hpcC54ID0gc2hpcC54ICsgc2hpcC5mb3J3YXJkLng7XHJcbiAgICBzaGlwLnkgPSBzaGlwLnkgLSBzaGlwLmZvcndhcmQueTtcclxuICB9IGVsc2Uge1xyXG4gICAgc2hpcC5leHBsb2FkaW5nVGltZS0tO1xyXG4gICAgaWYgKHNoaXAuZXhwbG9hZGluZ1RpbWUgPT09IDApIHtcclxuICAgICAgbGl2ZXMtLTtcclxuICAgICAgaWYgKGxpdmVzID09PSAwKSB7XHJcbiAgICAgICAgZ2FtZU92ZXIoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzaGlwID0gbmV3U2hpcCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBFZGdlIG9mIHNjcmVlblxyXG4gIGlmIChzaGlwLnggPCAwIC0gc2hpcC5yKSB7XHJcbiAgICBzaGlwLnggPSBjYW52YXMud2lkdGggKyBzaGlwLnI7XHJcbiAgfSBlbHNlIGlmIChzaGlwLnggPiBjYW52YXMud2lkdGggKyBzaGlwLnIpIHtcclxuICAgIHNoaXAueCA9IDAgLSBzaGlwLnI7XHJcbiAgfVxyXG4gIGlmIChzaGlwLnkgPCAwIC0gc2hpcC5yKSB7XHJcbiAgICBzaGlwLnkgPSBjYW52YXMuaGVpZ2h0ICsgc2hpcC5yO1xyXG4gIH0gZWxzZSBpZiAoc2hpcC55ID4gY2FudmFzLmhlaWdodCArIHNoaXAucikge1xyXG4gICAgc2hpcC55ID0gMCAtIHNoaXAucjtcclxuICB9XHJcblxyXG4gIC8vIE1vdmUgdGhlIGFzdGVyb2lkc1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXN0ZXJvaWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBhc3Rlcm9pZHNbaV0ueCA9IGFzdGVyb2lkc1tpXS54ICsgYXN0ZXJvaWRzW2ldLnh2IC8gMjtcclxuICAgIGFzdGVyb2lkc1tpXS55ID0gYXN0ZXJvaWRzW2ldLnkgKyBhc3Rlcm9pZHNbaV0ueXYgKiAyO1xyXG5cclxuICAgIC8vIEVkZ2Ugb2Ygc2NyZWVuIGFzdGVyb2lkc1xyXG4gICAgaWYgKGFzdGVyb2lkc1tpXS54IDwgMCAtIGFzdGVyb2lkc1tpXS5yKSB7XHJcbiAgICAgIGFzdGVyb2lkc1tpXS54ID0gY2FudmFzLndpZHRoICsgYXN0ZXJvaWRzW2ldLnI7XHJcbiAgICB9IGVsc2UgaWYgKGFzdGVyb2lkc1tpXS54ID4gY2FudmFzLndpZHRoICsgYXN0ZXJvaWRzW2ldLnIpIHtcclxuICAgICAgYXN0ZXJvaWRzW2ldLnggPSAwIC0gYXN0ZXJvaWRzW2ldLnI7XHJcbiAgICB9XHJcbiAgICBpZiAoYXN0ZXJvaWRzW2ldLnkgPCAwIC0gYXN0ZXJvaWRzW2ldLnIpIHtcclxuICAgICAgYXN0ZXJvaWRzW2ldLnkgPSBjYW52YXMuaGVpZ2h0ICsgYXN0ZXJvaWRzW2ldLnI7XHJcbiAgICB9IGVsc2UgaWYgKGFzdGVyb2lkc1tpXS55ID4gY2FudmFzLmhlaWdodCArIGFzdGVyb2lkc1tpXS5yKSB7XHJcbiAgICAgIGFzdGVyb2lkc1tpXS55ID0gMCAtIGFzdGVyb2lkc1tpXS5yO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gZnVuY3Rpb24gaGFuZGxlS2V5KGV2ZW50KSB7XHJcbi8vICAgY29uc29sZS5sb2coZXZlbnQua2V5Q29kZSk7XHJcbi8vIH1cclxuLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUtleSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n')}]);